<%- include('../partials/header.ejs') %>

    <!-- Main -->
    <main class="container lg:max-w-4xl flex items-center grow flex-col mx-auto">
      <!-- Categories Container -->
      <div class="flex justify-center w-full bg-light h-full mt-12 mb-32 border-y sm:border border-slate-900 shadow-xl sm:rounded">
        <div class="flex flex-col justify-center w-full bg-white h-full border-y-2 sm:border-2 border-slate-300 rounded-xl shadow-lg m-3">
          <!-- Text Header -->
          <div class="flex justify-center mt-8 mb-4">
            <h1 class="text-3xl text-bold">Upcoming Events</h1>
          </div>
          <div class="md:p-5">
            <!-- IF CATEGORIES EXISTS -->
            <% if (categories.length) { %>
              <!-- FOR EACH CATEGORY IN CATEGORIES -->
              <% categories.forEach(category=>{ %>
                <!-- Category Container -->
                <div class="flex flex-col justify-center bg-slate-200 w-full rounded-xl mx-auto md:border-2 border-slate-300 shadow-lg mt-8">
                  <!-- Category Title -->
                  <div class="flex justify-center border-b-2 border-slate-900 w-full">
                    <h1 class="text-2xl serif py-3"><%= category %></h1>
                  </div>

                  <!-- FOR EACH EVENT IN EVENTS -->
                  <% events.forEach(event=>{ %>
                    <% if (event.category === category) { %>
                      <!-- Event -->
                      <div class="flex flex-col o-70 p-3 space-y-8">
                        <a href="/events/<%= event.id %>" class="sans text-xl p-2 rounded-2xl hover-bg-blue"><%= event.title %></a> 
                      </div>
                    <% } %>
                  <% }); %>
                </div>
              <% }); %>
            <!-- ELSE -->
            <% } else { %>
              <p class="text-center py-12 serif text-3xl">There are currently no events to display.</p>
            <% } %>
          </div>  
        </div>
      </div>
    </main>

    <%- include('../partials/footer.ejs') %>